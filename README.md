
## Retro Radio
 
### Video Demo: https://youtu.be/qMgXCIsXRSU 

### Description:

## Abstract:
Traditional Radios are easy to operate. There is a power butten, a volume controller and a turning button to change the receiving frequency. Unfortunately the number of radio stations that can be listened to with an old radio is small and the shutdown of the traditional radio-frequency broadcast in some areas of the world makes them less and less useful.
Modern internet radios on the other hand can play radio stations from all over the world but are often ugly and uncomfortable to operate.
In my project I aim at combining the advantages of the internet age with the simplicity and elegance of an old radio.

## Hardware Choices:

#### Radio:
A old radio serves as a base unit for this project. This transistor radio was built around 1970 by the west-german manufacturer SABA and    was in good working condition. It has a wooden case and features a 6 Watt amplifier with a built in speaker. It also has a line-in port for tape decks.
A description can be found here: https://www.radiomuseum.org/r/saba_mainau_f.html

#### Computer:
A raspberry pi will interpret user input, play the internet radio stations and send the audiosignal to the analogue output.

#### Hardware Modifications:

##### Rotary Encoder:
In oder to use the existing freuqency selecting turning button a optical rotary encoder was attached to it. In this way angular motion of the frequency button can be digitally read out.

##### Push Button:
A push button was added to pause/resume playback.

##### Audio Signal:
The audio signal is generated by the Raspberry Pi and enters the existing radio amplifier through the exiting line-in port. 

##### Raspberry Pi Power Supply:
A 5V power supply of sufficient output was connected to the internal 220V power curcuit of the radio to supply the raspberry pi with power.

## Languages:
The core program is written in Python. Existing libraries have been used to drive the rotary encoder, the gpio and to connect to internet  radio stations. To automatically execute the program at startup some bash scripting was necessary.

## Dependencies:
Retro_radio uses the RPi.GPIO and pigpio library as well as a modified version of rotary_encoder to connect to the rotary encoder. 
For playing the radio stations or mp3-files it uses vlc for python.

## Files and what they do:

#### playlist.csv

Contains which internet radio station (or music file) should be played at which frequency position. One station per line. Modify this file to your tast of music. 
The format is as follows:

First position, last position, radio station URL, Station Name (optional), Station URL (optional)

#### position.py

This stores the position of the frequency needle in case of a shutdown of the radio.

#### rauschen.mp3

A file containing noise. It is played when there is no radio station attached to the current frequency position.

#### rotary_encoder.py

Class to decode mechanical rotary encoder pulses.

Taken from github and modified. The original contributor is joan2937. 

https://github.com/joan2937

#### retro_radio.py

This is the main script written in Python. Here is what it does:

When started, it will first import the last position of the frequency pointer, then check the playlist.csv file for integrity and import it as a list called 'stations'.

It then initializes the gpio module of the Raspberry Pi and sets up the rotary encoder as well as the push button.

Because the script will have to check often and quickly whether a certain frequency position corresponds to a new radio station (whenever the frequency button is turned) this process needs to be quick and lightweight. The way it is implemented is by creating a 'translation' list (pos2station). In this list the index corresponds to the rotary coder position and the value to the line number of the station in 'stations'. In this manner the script can quickly check if a new radio station needs to be played.

The script now enters an infinite loop and will listen to any changes of the frequency position (you turning the frequency button) and play the corresponding radio station.

#### retro_radio.service

example file to add retro_radio service to systemctl














